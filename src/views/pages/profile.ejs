<%- include('../partials/header', { pageTitle: 'Profile | PolyCOOP' }) %>
<main>
    
   <h1><%= user.username %></h1>
   <p>Wiek: <%= user.age %> lat</p>
   <p>Opis: <%= user.description %></p>
    <img src="/uploads/<%= user.profileImage %>" alt="Profile Picture" class="profile-picture">
<h2>Partnerzy:</h2>
<% if (partners && partners.length > 0) { %>
    <ul>
        <% partners.forEach(partner => { %>
            <li>
                <a href="/profile/<%= partner.userSlug %>">
                    <%= partner.username %> (<%= partner.age %> lat)
                </a>
            </li>
        <% }) %>
    </ul>
<% } else { %>
    <p>Brak partner√≥w.</p>
<% } %>

  
   <% if (req.session.userId === user._id.toString()) { %>
     <!-- <a href="/profile/edit">Edit Profile</a> -->
   <a href="/profile/<%= req.session.userSlug %>/incoming">view received requests</a>
   <a href="/profile/<%= req.session.userSlug %>/outgoing">view sent requests</a>
   <% } else if (partners && partners.length >0){%>
        <% if (partners && partners.some(partner => partner._id.toString() === req.session.userId)) { %>
            <a href="/profile/<%= user.userSlug %>/remove-match/<%= req.session.userSlug %>">Break up</a>
        <% } %>
    <% } else { %>
        <a href="/profile/<%= user.userSlug %>/match/<%= req.session.userSlug %>">Match</a>
    <% } %>

</main>
<%- include('../partials/footer') %>
